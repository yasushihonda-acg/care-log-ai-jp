
<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Care Log - System Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“˜</text></svg>">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
    <style>
        /* Custom scrollbar for code blocks */
        pre::-webkit-scrollbar {
            height: 8px;
        }
        pre::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }
        .prose h2 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e2e8f0;
        }
        .prose h3 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: #1e293b;
        }
        .prose ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }
        .prose p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">

    <div class="flex min-h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white border-r border-gray-200 fixed h-full hidden lg:block overflow-y-auto z-10">
            <div class="p-6">
                <div class="flex items-center gap-2 font-bold text-xl text-blue-600 mb-8">
                    <span>ğŸ“˜</span>
                    System Docs
                </div>
                <nav class="space-y-1">
                    <a href="#architecture" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ</a>
                    <a href="#gcp-migration" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">2. GCP/Firebase ç§»è¡Œ</a>
                    <a href="#cicd" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">3. CI/CD è¨­è¨ˆ</a>
                    <a href="#database" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</a>
                    <a href="#api" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">5. API ä»•æ§˜æ›¸</a>
                    <a href="#features" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">6. æ©Ÿèƒ½ä»•æ§˜è©³ç´°</a>
                    <a href="#changelog" class="block px-3 py-2 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors">7. å¤‰æ›´å±¥æ­´</a>
                </nav>
            </div>
            <div class="px-6 py-4 border-t border-gray-100 text-xs text-gray-400">
                Last Updated: 2025/12/10
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 lg:ml-64 p-4 lg:p-12 max-w-5xl mx-auto w-full">

            <!-- Mobile Header -->
            <div class="lg:hidden mb-8 pb-4 border-b border-gray-200">
                <h1 class="text-2xl font-bold text-slate-900">AI Care Log Documentation</h1>
                <p class="text-sm text-slate-500 mt-1">System Design & API Reference</p>
            </div>

            <!-- 1. ARCHITECTURE -->
            <section id="architecture" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-blue-100 text-blue-600 p-2 rounded-lg text-xl">1</span>
                    ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
                </h1>

                <h2>æ¦‚è¦</h2>
                <p><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå:</strong> AIä»‹è­·è¨˜éŒ²ã‚¢ãƒ—ãƒª (care-log-ai-jp)</p>
                <p>éŸ³å£°ã¾ãŸã¯è‡ªç„¶è¨€èªãƒ†ã‚­ã‚¹ãƒˆã§å…¥åŠ›ã•ã‚ŒãŸä»‹è­·è¨˜éŒ²ã‚’Google Gemini (Flashãƒ¢ãƒ‡ãƒ«) ã§è§£æãƒ»æ§‹é€ åŒ–ã—ã€ä¿å­˜ãƒ»å¯è¦–åŒ–ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p>

                <div class="bg-green-50 border-l-4 border-green-500 p-4 my-4">
                    <p class="font-bold text-green-700">ğŸ‰ Phase 1 å®Œäº† - æœ¬ç•ªãƒ†ã‚¹ãƒˆåˆ©ç”¨é–‹å§‹å¯èƒ½</p>
                    <p class="text-sm text-green-600 mt-1">
                        ç¬¬ä¸€æ¬¡é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºãŒå®Œäº†ã—ã¾ã—ãŸã€‚<br>
                        <strong>æœ¬ç•ªURL:</strong> <a href="https://care-log-ai-jp.web.app" class="underline">https://care-log-ai-jp.web.app</a><br>
                        <strong>API Base:</strong> <code class="text-xs">https://asia-northeast1-care-log-ai-jp.cloudfunctions.net</code><br>
                        <strong>è©•ä¾¡:</strong> åŠç¬¬ç‚¹ (Parse API: A, Records API: A, Chat API: A, éŸ³å£°å…¥åŠ›: B)
                    </p>
                </div>

                <h2>æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯å¤‰é·</h2>
                <p class="text-sm text-slate-600 mb-4">Google AI Studio (Build) â†’ Vercel â†’ GCP/Firebase ã¨ã„ã†å¤‰é·ã‚’çµŒã¦ç¾åœ¨ã®æ§‹æˆã«è‡³ã‚Šã¾ã—ãŸã€‚</p>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="px-4 py-2 text-left font-bold text-slate-600">ã‚«ãƒ†ã‚´ãƒª</th>
                                <th class="px-4 py-2 text-left font-bold text-slate-600 text-xs">Phase 0<br>AI Studio</th>
                                <th class="px-4 py-2 text-left font-bold text-slate-600 text-xs">Phase 0.5<br>Vercel</th>
                                <th class="px-4 py-2 text-left font-bold text-slate-600 text-xs bg-green-50">Phase 1 (ç¾è¡Œ)<br>GCP/Firebase</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr><td class="px-4 py-2">Frontend</td><td class="px-4 py-2 font-mono text-slate-400 text-xs">-</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">React (Vite)</td><td class="px-4 py-2 font-mono text-green-600">React (Vite)</td></tr>
                            <tr><td class="px-4 py-2">Hosting</td><td class="px-4 py-2 font-mono text-slate-400 text-xs">-</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">Vercel</td><td class="px-4 py-2 font-mono text-green-600">Firebase Hosting</td></tr>
                            <tr><td class="px-4 py-2">Backend</td><td class="px-4 py-2 font-mono text-slate-400 text-xs">-</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">Vercel Functions</td><td class="px-4 py-2 font-mono text-green-600">Cloud Functions 2nd Gen</td></tr>
                            <tr><td class="px-4 py-2">Database</td><td class="px-4 py-2 font-mono text-slate-400 text-xs">-</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">Vercel Postgres</td><td class="px-4 py-2 font-mono text-green-600">Firestore</td></tr>
                            <tr><td class="px-4 py-2">AI Model</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">Google AI Studio</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">Gemini API (APIã‚­ãƒ¼)</td><td class="px-4 py-2 font-mono text-green-600">Vertex AI (Workload Identity)</td></tr>
                            <tr><td class="px-4 py-2">CI/CD</td><td class="px-4 py-2 font-mono text-slate-400 text-xs">-</td><td class="px-4 py-2 font-mono text-slate-500 text-xs">Vercel Git Integration</td><td class="px-4 py-2 font-mono text-green-600">GitHub Actions + OIDC</td></tr>
                        </tbody>
                    </table>
                </div>

                <h2>ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ (ç¾è¡Œ)</h2>
                <div class="bg-slate-50 p-4 rounded-xl border border-slate-100 my-6">
<pre class="mermaid">
graph TD
    User["ãƒ¦ãƒ¼ã‚¶ãƒ¼ (PC/Mobile)"] -->|"HTTPS"| FH["Firebase Hosting"]

    subgraph GCP ["Google Cloud Platform"]
        FH -->|"Rewrite"| CF["Cloud Functions 2nd Gen"]
        CF -->|"Query"| FS[("Firestore")]
        CF -->|"Workload Identity"| VA["Vertex AI Gemini"]
    end

    subgraph CICD ["CI/CD"]
        GHA["GitHub Actions"] -->|"OIDC Token"| WIF["Workload Identity Federation"]
        WIF -->|"Short-lived Token"| CF
        WIF -->|"Deploy"| FH
    end
</pre>
                </div>

                <h2>ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h2>
                <div class="bg-slate-50 p-4 rounded-xl border border-slate-100 my-6">
<pre class="mermaid">
sequenceDiagram
    participant U as "User"
    participant FE as "Frontend"
    participant CF as "Cloud Functions"
    participant FS as "Firestore"
    participant VA as "Vertex AI"

    Note over U, VA: AIè§£æãƒ•ãƒ­ãƒ¼
    U->>FE: éŸ³å£°/ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›
    FE->>CF: POST /api/parse (Text + Settings)
    CF->>VA: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡ (Few-Shot Examples)
    VA-->>CF: JSONå¿œç­” (Structured Data)
    CF-->>FE: è§£æçµæœ
    U->>FE: ç¢ºèªãƒ»ä¿®æ­£ãƒ»ä¿å­˜
    FE->>CF: POST /api/records
    CF->>FS: Documentè¿½åŠ 

    Note over U, VA: RAGãƒãƒ£ãƒƒãƒˆãƒ•ãƒ­ãƒ¼
    U->>FE: ã€Œæœ€è¿‘ã®é£Ÿäº‹é‡ã¯ï¼Ÿã€
    FE->>CF: POST /api/chat
    CF->>FS: ç›´è¿‘50ä»¶å–å¾—
    FS-->>CF: è¨˜éŒ²ãƒ‡ãƒ¼ã‚¿
    CF->>VA: è¨˜éŒ²ãƒ‡ãƒ¼ã‚¿ + è³ªå• (Context Injection)
    VA-->>CF: å›ç­”ç”Ÿæˆ
    CF-->>FE: å›ç­”è¡¨ç¤º
</pre>
                </div>
            </section>

            <!-- 2. GCP MIGRATION -->
            <section id="gcp-migration" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-green-100 text-green-600 p-2 rounded-lg text-xl">2</span>
                    GCP/Firebase ç§»è¡Œ
                </h1>

                <h2>ç§»è¡Œç†ç”±</h2>
                <ul>
                    <li><strong>Vercelç„¡æ–™æ ã®åˆ¶é™:</strong> ãƒ‡ãƒ—ãƒ­ã‚¤æ•°ãƒ»ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™</li>
                    <li><strong>Workload Identity:</strong> APIã‚­ãƒ¼ä¸è¦ã®ã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼</li>
                    <li><strong>GCPã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ :</strong> Vertex AI, Firestore, Cloud Functionsã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªé€£æº</li>
                </ul>

                <h2>GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±</h2>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                    <table class="text-sm w-full">
                        <tr><td class="font-bold pr-4">Project ID:</td><td class="font-mono">care-log-ai-jp</td></tr>
                        <tr><td class="font-bold pr-4">Project Number:</td><td class="font-mono">71778021308</td></tr>
                        <tr><td class="font-bold pr-4">Region:</td><td class="font-mono">asia-northeast1</td></tr>
                        <tr><td class="font-bold pr-4">Status:</td><td><span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs">TEST / ä¸€æ™‚åˆ©ç”¨</span></td></tr>
                    </table>
                </div>

                <h2>Workload Identity Federation</h2>
                <p>GitHub Actionsã‹ã‚‰GCPã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã§ã¯ãªã<strong>Workload Identity Federation (OIDC)</strong>ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
                <div class="bg-slate-50 p-4 rounded-xl border border-slate-100 my-6">
<pre class="mermaid">
sequenceDiagram
    participant GHA as "GitHub Actions"
    participant WIF as "Workload Identity Pool"
    participant SA as "Service Account"
    participant GCP as "GCP Resources"

    GHA->>WIF: OIDC Token (JWT)
    WIF->>WIF: Validate Token
    WIF->>SA: Exchange for Access Token
    SA-->>GHA: Short-lived Access Token
    GHA->>GCP: Deploy (Functions/Hosting)
</pre>
                </div>

                <h3>è¨­å®šæ¸ˆã¿ãƒªã‚½ãƒ¼ã‚¹</h3>
                <ul>
                    <li><strong>Pool:</strong> <code>github-pool</code></li>
                    <li><strong>Provider:</strong> <code>github-provider</code></li>
                    <li><strong>Service Account:</strong> <code>github-actions@care-log-ai-jp.iam.gserviceaccount.com</code></li>
                </ul>

                <h2>ç§»è¡Œé€²æ—</h2>
                <div class="space-y-2">
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> å¿…è¦ãªAPIæœ‰åŠ¹åŒ–</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç´ä»˜ã‘</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> Workload Identity Federationè¨­å®š</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œæˆ</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> Cloud Functionsã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä½œæˆ</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆ</div>
                    <div class="flex items-center gap-2"><span class="text-green-500">âœ“</span> ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰APIåˆ‡ã‚Šæ›¿ãˆ</div>
                </div>
                <p class="text-sm text-green-600 mt-4 font-medium">âœ… ã™ã¹ã¦ã®ç§»è¡Œã‚¹ãƒ†ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸ (2025-12-10)</p>
            </section>

            <!-- 3. CI/CD -->
            <section id="cicd" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-purple-100 text-purple-600 p-2 rounded-lg text-xl">3</span>
                    CI/CD è¨­è¨ˆ
                </h1>

                <h2>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ¦‚è¦</h2>
                <div class="bg-slate-50 p-4 rounded-xl border border-slate-100 my-6">
<pre class="mermaid">
graph LR
    A["Push to main"] --> B["Build"]
    B --> C["Deploy Functions"]
    B --> D["Deploy Hosting"]

    E["Pull Request"] --> F["Build"]
    F --> G["Preview Deploy"]
</pre>
                </div>

                <h2>ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm border border-slate-200 rounded-lg overflow-hidden">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="px-4 py-2 text-left">ã‚¤ãƒ™ãƒ³ãƒˆ</th>
                                <th class="px-4 py-2 text-left">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr>
                                <td class="px-4 py-2 font-mono">push to main</td>
                                <td class="px-4 py-2">æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ (Hosting + Functions)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 font-mono">pull_request to main</td>
                                <td class="px-4 py-2">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤ + ãƒ†ã‚¹ãƒˆ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h2>
                <ul>
                    <li><strong>Keylessèªè¨¼:</strong> ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ä¸è¦ (Workload Identity Federation)</li>
                    <li><strong>æœ€å°æ¨©é™:</strong> å¿…è¦ãªIAMãƒ­ãƒ¼ãƒ«ã®ã¿ä»˜ä¸</li>
                    <li><strong>ãƒªãƒã‚¸ãƒˆãƒªåˆ¶é™:</strong> <code>yasushihonda-acg/care-log-ai-jp</code> ã®ã¿è¨±å¯</li>
                </ul>
            </section>

            <!-- 4. DATABASE -->
            <section id="database" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-cyan-100 text-cyan-600 p-2 rounded-lg text-xl">4</span>
                    ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
                </h1>

                <h2>Firestore ã‚¹ã‚­ãƒ¼ãƒ</h2>
                <div class="bg-slate-800 text-slate-50 p-4 rounded-lg overflow-x-auto my-4">
<pre><code>care_records/                    # ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
  â””â”€â”€ {documentId}/              # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (auto-generated)
        â”œâ”€â”€ record_type: string  # "meal", "vital", "excretion", etc.
        â”œâ”€â”€ details: map         # æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
        â””â”€â”€ created_at: timestamp</code></pre>
                </div>

                <h2>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
                <p>AIè§£æã®æˆåŠŸç‡ã‚’é«˜ã‚ã‚‹ãŸã‚ã€è©³ç´°ã¯åŸºæœ¬çš„ã«<strong>Stringå‹</strong>ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                        <h4 class="font-bold text-sm text-slate-500 mb-2">é£Ÿäº‹ (meal)</h4>
<pre class="text-xs bg-white p-2 rounded border border-slate-200"><code>{
  "main_dish": "å…¨ç²¥",
  "amount_percent": "80",
  "fluid_ml": "200",
  "fluid_type": "ãŠèŒ¶"
}</code></pre>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                        <h4 class="font-bold text-sm text-slate-500 mb-2">ãƒã‚¤ã‚¿ãƒ« (vital)</h4>
<pre class="text-xs bg-white p-2 rounded border border-slate-200"><code>{
  "temperature": "36.8",
  "systolic_bp": "124",
  "pulse": "72"
}</code></pre>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                        <h4 class="font-bold text-sm text-slate-500 mb-2">æ’æ³„ (excretion)</h4>
<pre class="text-xs bg-white p-2 rounded border border-slate-200"><code>{
  "excretion_type": "å°¿",
  "amount": "å¤šé‡",
  "incontinence": "ã‚ã‚Š"
}</code></pre>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-100">
                        <h4 class="font-bold text-sm text-slate-500 mb-2">è¡›ç”Ÿ (hygiene)</h4>
<pre class="text-xs bg-white p-2 rounded border border-slate-200"><code>{
  "bath_type": "æ¸…æ‹­",
  "skin_condition": "ç™ºèµ¤ã‚ã‚Š",
  "notes": "è»Ÿè†å¡—å¸ƒ"
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- 5. API -->
            <section id="api" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-indigo-100 text-indigo-600 p-2 rounded-lg text-xl">5</span>
                    API ä»•æ§˜æ›¸
                </h1>

                <h3>POST /api/parse</h3>
                <p>è‡ªç„¶è¨€èªãƒ†ã‚­ã‚¹ãƒˆã‚’è§£æã—ã€æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã¸å¤‰æ›ã—ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¨­å®šã‚’å—ã‘å–ã‚Šã€å‹•çš„ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-100 text-sm">
                    <strong>Request:</strong>
<pre class="mt-2 text-xs"><code>{
  "text": "æ˜¼é£Ÿã¯å…¨ç²¥8å‰²ã€ãŠèŒ¶200mlã§ã—ãŸã€‚",
  "fieldSettings": { ... } // descriptionå«ã‚€
}</code></pre>
                    <strong class="block mt-4">Response:</strong>
<pre class="mt-2 text-xs"><code>{
  "record_type": "meal",
  "details": {
    "main_dish": "å…¨ç²¥",
    "amount_percent": "80",
    "fluid_type": "ãŠèŒ¶",
    "fluid_ml": "200"
  }
}</code></pre>
                </div>

                <h3>GET /api/records</h3>
                <p>è¨˜éŒ²ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ï¼ˆæœ€æ–°100ä»¶ï¼‰ã€‚</p>

                <h3>POST /api/records</h3>
                <p>æ–°è¦è¨˜éŒ²ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

                <h3>PUT /api/records</h3>
                <p>æ—¢å­˜è¨˜éŒ²ã‚’æ›´æ–°ã—ã¾ã™ï¼ˆIDå¿…é ˆï¼‰ã€‚</p>

                <h3>DELETE /api/records?id={id}</h3>
                <p>æŒ‡å®šIDã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>

                <h3>POST /api/chat</h3>
                <p>RAG (Retrieval-Augmented Generation) ã‚’åˆ©ç”¨ã—ãŸAIç›¸è«‡æ©Ÿèƒ½ã€‚ç›´è¿‘50ä»¶ã®è¨˜éŒ²ã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦å›ç­”ã—ã¾ã™ã€‚</p>
            </section>

            <!-- 6. FEATURES -->
            <section id="features" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-orange-100 text-orange-600 p-2 rounded-lg text-xl">6</span>
                    æ©Ÿèƒ½ä»•æ§˜è©³ç´°
                </h1>

                <h2>AIè§£æãƒ­ã‚¸ãƒƒã‚¯ (Aggressive Few-Shot Strategy)</h2>
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4">
                    <p class="font-bold text-blue-700">è¨­è¨ˆæ€æƒ³: Example-Driven Extraction</p>
                    <p class="text-sm text-blue-600 mt-1">
                        Gemini 2.5 Flashã®é«˜é€Ÿãªãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜èƒ½åŠ›ã‚’æ´»ã‹ã™ãŸã‚ã€è¤‡é›‘ãªè«–ç†æŒ‡ç¤ºã§ã¯ãªãã€Œå…·ä½“çš„ãªå…¥å‡ºåŠ›ä¾‹ï¼ˆFew-Shotï¼‰ã€ã‚’å¤§é‡ã«æç¤ºã™ã‚‹æˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚<br>
                        ã“ã‚Œã«ã‚ˆã‚Šã€ã€ŒãŠèŒ¶200mlã€ã®ã‚ˆã†ãªè¤‡åˆãƒ‡ãƒ¼ã‚¿ã‚‚ä¾‹ã«å¾“ã£ã¦ã‚¹ãƒ ãƒ¼ã‚ºã«åˆ†é›¢ã•ã‚Œã¾ã™ã€‚
                    </p>
                </div>

                <h3>Superset Schema æˆ¦ç•¥</h3>
                <div class="bg-amber-50 border-l-4 border-amber-500 p-4 my-4">
                    <p class="font-bold text-amber-700">æŠ€è¡“çš„èª²é¡Œã¨è§£æ±ºç­–</p>
                    <p class="text-sm text-amber-600 mt-1">
                        Gemini APIã® <code>responseSchema</code> ã¯ã€Few-Shotä¾‹ã«å«ã¾ã‚Œã‚‹ã‚­ãƒ¼ãŒã‚¹ã‚­ãƒ¼ãƒã«æœªå®šç¾©ã ã¨500ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¾ã™ã€‚<br>
                        ã“ã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®æ—¢çŸ¥ã‚­ãƒ¼ï¼ˆ<code>ALL_KNOWN_KEYS</code>ï¼‰ã‚’å¸¸ã«ã‚¹ã‚­ãƒ¼ãƒã«å«ã‚ã‚‹ã€ŒSuperset Schemaã€æˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
                    </p>
                </div>

                <h3>Fail-Safe: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è£œå®Œ</h3>
                <p>
                    å¤ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã‚‚ç²¾åº¦ã‚’è½ã¨ã•ãªã„ã‚ˆã†ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¨­å®šã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆæŠ½å‡ºãƒ«ãƒ¼ãƒ«ï¼‰ã‚’å¼·åˆ¶çš„ã«è£œå®Œã—ã¦ã„ã¾ã™ã€‚
                </p>

                <h2 class="mt-8">å‹•çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¨­å®š</h2>
                <p>æ–½è¨­ã”ã¨ã«ç•°ãªã‚‹è¨˜éŒ²é …ç›®ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€<code>localStorage</code> ã‚’åˆ©ç”¨ã—ãŸãƒã‚¹ã‚¿ãƒ¼è¨­å®šæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p>
            </section>

            <!-- 7. CHANGELOG -->
            <section id="changelog" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8 prose max-w-none">
                <h1 class="text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <span class="bg-rose-100 text-rose-600 p-2 rounded-lg text-xl">7</span>
                    å¤‰æ›´å±¥æ­´
                </h1>

                <h2>2025-12-10 (Latest)</h2>
                <div class="space-y-4">
                    <div class="bg-green-50 p-4 rounded-lg border border-green-100">
                        <h4 class="font-bold text-green-700 text-sm mb-2">Added - GCP/Firebase ç§»è¡Œ</h4>
                        <ul class="text-sm text-green-600 space-y-1">
                            <li>GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ (<code>care-log-ai-jp</code>)</li>
                            <li>Workload Identity Federation è¨­å®š</li>
                            <li>GitHub Actions CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</li>
                            <li>Cloud Functions ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</li>
                            <li>Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ</li>
                            <li>Firebase Hosting è¨­å®š</li>
                        </ul>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                        <h4 class="font-bold text-blue-700 text-sm mb-2">Documentation</h4>
                        <ul class="text-sm text-blue-600 space-y-1">
                            <li>GCP_MIGRATION_PLAN.md è¿½åŠ </li>
                            <li>CICD_DESIGN.md è¿½åŠ </li>
                            <li>GitHub Pages (index.html) å¤§å¹…æ›´æ–°</li>
                        </ul>
                    </div>
                </div>

                <h2 class="mt-6">2025-12-10 (Earlier)</h2>
                <div class="space-y-4">
                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-100">
                        <h4 class="font-bold text-purple-700 text-sm mb-2">Fixed - AIè§£æã‚¨ãƒ©ãƒ¼</h4>
                        <ul class="text-sm text-purple-600 space-y-1">
                            <li>AIè§£æã®500ã‚¨ãƒ©ãƒ¼ä¿®æ­£ (Superset Schemaæˆ¦ç•¥)</li>
                            <li>æ’æ³„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®äºˆç´„èªè¡çª (<code>type</code> â†’ <code>excretion_type</code>)</li>
                            <li>å±¥æ­´è¡¨ç¤ºã®å¾Œæ–¹äº’æ›ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯</li>
                        </ul>
                    </div>
                </div>

                <p class="mt-4 text-sm text-slate-500">
                    è©³ç´°ã¯ <a href="https://github.com/yasushihonda-acg/care-log-ai-jp/blob/main/docs/CHANGELOG.md" class="text-blue-600 hover:underline">CHANGELOG.md</a> ã‚’å‚ç…§
                </p>
            </section>

            <footer class="text-center text-slate-400 py-8 text-sm">
                &copy; 2025 AI Care Log Project
            </footer>
        </main>
    </div>
</body>
</html>
